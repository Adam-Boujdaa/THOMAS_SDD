#ifndef VOYAGEUR_H
#define VOYAGEUR_H

#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include "trajet.h"  // Inclusion de l'entête pour le type Trajet
#include <openssl/sha.h>  // Bibliothèque pour SHA256

#define TAILLE_NOM 100
#define TAILLE_MOT_DE_PASSE 64
#define TAILLE_HASH 64 // Define TAILLE_HASH to match the size of hashed passwords
#define MAX_RESERVATIONS 10
#define MAX_VOYAGEURS 100

// Déclaration opaque de la structure Voyageur
typedef struct s_voyageur* Voyageur;

// Fonction pour hacher un mot de passe avec SHA256
void hacher_mot_de_passe(const char* mot_de_passe, char* mot_de_passe_hash);

// Initialiser un voyageur avec un nom, un identifiant et un mot de passe
Voyageur voyageur_init(const char* nom, int identifiant, const char* mot_de_passe);

// Supprimer un voyageur
void voyageur_effacer(Voyageur* voyageur);

// Récupérer l'identifiant d'un voyageur
int voyageur_get_identifiant(Voyageur v);

// Récupérer le nom d'un voyageur
const char* voyageur_get_nom(Voyageur v);

// Vérifier le mot de passe lors de la connexion
int voyageur_verifier_mot_de_passe(Voyageur v, const char* mot_de_passe);

// Rechercher un voyageur par identifiant
Voyageur voyageur_rechercher_par_id(int identifiant, Voyageur* liste, int taille);

// Ajouter une réservation pour un voyageur
int voyageur_reserver_trajet(Voyageur voyageur, Trajet trajet);

// Modifier une réservation de trajet
int voyageur_modifier_trajet(Voyageur voyageur, Trajet ancien, Trajet nouveau);

// Afficher les réservations d'un voyageur
void voyageur_afficher_reservations(Voyageur voyageur);

// Tableau des voyageurs enregistrés
extern Voyageur voyageurs[MAX_VOYAGEURS];
extern int nombre_voyageurs;

// Fonction de création de compte
int creer_compte(const char* nom, int identifiant, const char* mot_de_passe);

// Fonction de connexion
Voyageur connexion(int identifiant, const char* mot_de_passe);

#endif  // VOYAGEUR_H
